<div sd-modal data-model="item" data-full="true" class="modal--fullscreen modal--preview-article modal--white">
    <div class="modal__header modal__header--no-border">
        <div class="btn-group pull-left">
            <span sd-check ng-model="hide_images" name="hide_images"></span>
            <label translate>Hide images</label>
        </div>
        <div class="btn-group pull-right">
            <button ng-click="printPreview()" title="{{'Print'|translate}}"><i class="icon-print"></i></button>
            <button ng-if="closeAction" ng-click="closeAction()" title="{{'Close'|translate}}"><i class="icon-close-small"></i></button>
        </div>
    </div>
    <div class="modal__body modal-body--white" sd-shadow>
        <div class="preview-content" ng-class="{'hide-images': hide_images}">
            <div class="metadata">
                <div ng-if="item.versioncreated">
                    <div class="preview-label">
                        <label translate>Last Modified</label>
                    </div>
                    <div class="preview-data">
                        <div sd-reldate-complex ng-model="item.versioncreated"></div>
                    </div>
                </div>
                <div ng-if="item.slugline && !editor.slugline.hideOnPrint" order="{{editor.slugline.order}}">
                    <div class="preview-label">
                        <label translate>Slugline</label>
                    </div>
                    <div class="preview-data">
                        <span>{{item.slugline}}</span>
                    </div>
                </div>
                <div ng-if="item.anpa_category.length && !editor.anpa_category.hideOnPrint" order="{{editor.anpa_category.order}}">
                    <div class="preview-label">
                        <label translate>Service</label>
                    </div>
                    <div class="preview-data">
                        <span ng-repeat="service in item.anpa_category">
                            {{getLocaleName(service)}}
                        </span>
                    </div>
                </div>
                <div ng-if="(item.subject | mergeWords:'name' : 'category') && !editor.category.hideOnPrint && !editor.subject.topicOnPrint"
                    order="{{editor.category.order}}">
                    <div class="preview-label">
                        <label translate>Category</label>
                    </div>
                    <div class="preview-data">
                        <span ng-repeat="category in item.subject | mergeWords:'name' : 'category': true">
                            {{category}}
                        </span>
                    </div>
                </div>
                <div ng-if="item.genre.length && !editor.genre.hideOnPrint" order="{{editor.genre_custom.order}}">
                    <div class="preview-label">
                        <label translate>Genre</label>
                    </div>
                    <div class="preview-data">
                        <span ng-repeat="genre in item.genre">
                            {{getLocaleName(genre)}}
                        </span>
                    </div>
                </div>
                <div ng-if="(item.subject | mergeWords:'name' : 'subject_custom') && !editor.subject_custom.hideOnPrint && !editor.subject.topicOnPrint"
                    order="{{editor.subject_custom.order}}">
                    <div class="preview-label">
                        <label translate>Subject</label>
                    </div>
                    <div class="preview-data">
                        <span ng-repeat="subject in item.subject | filter:{'scheme':'subject_custom'}">
                            {{getLocaleName(subject)}}
                        </span>
                    </div>
                </div>
                <div ng-if="item.subject.length && editor.subject.topicOnPrint" order="{{editor.subject_custom.order}}">
                    <div class="preview-label">
                        <label translate>Topic</label>
                    </div>
                    <div class="preview-data">
                        <span ng-repeat="topic in item.subject|filter:filterKey">
                            {{getLocaleName(topic)}}
                        </span>
                    </div>
                </div>
                <div ng-if="item.place.length && !editor.place.hideOnPrint" order="{{editor.place_custom.order}}">
                    <div class="preview-label">
                        <label translate>Place</label>
                    </div>
                    <div class="preview-data">
                        <span ng-repeat="place in item.place">
                            {{getLocaleName(place)}}
                        </span>
                    </div>
                </div>
                <div ng-if="item.ednote && !editor.ednote.hideOnPrint" order="{{editor.ednote.order}}">
                    <div class="preview-label">
                        <label translate>Ed. Note</label>
                    </div>
                    <div class="preview-data">
                        <span>{{item.ednote}}</span>
                    </div>
                </div>
                <!-- custom fields -->
                <div ng-repeat="field in fields track by field._id"
                    ng-if="field.field_type === 'text' || field.field_type === 'date'"
                    order="{{ editor[field._id].order }}">
                    <div class="preview-label">
                        <label translate>{{field.display_name}}</label>
                    </div>
                    <div class="preview-data">
                        <div sd-short-date ng-if="field.field_type === 'date'" data-date="item.extra[field._id]"></div>
                        <div ng-if="field.field_type === 'text'" ng-bind-html="getHtml(item.extra[field._id])"></div>
                    </div>
                </div>
            </div>
            <div class="headline" order="{{editor.headline.order}}" ng-if="!editor.headline.hideOnPrint">{{item.headline}}</div>
            <div ng-repeat="field in fields track by field._id"
                ng-if="field.field_type === 'embed'"
                order="{{ editor[field._id].order }}"
                class="body preview-editor">
                <div class="preview-label">
                    <label translate>{{field.display_name}}</label>
                </div>
                <div ng-if="field.field_type === 'embed' && !hide_images" ng-bind-html="getHtml(item.extra[field._id].embed)">
                </div>
            </div>
            <div order="{{editor.feature_image.order}}" ng-if="!editor.feature_image.hideOnPrint"
                ng-repeat="association in item.associations|embeddedFilter" class="association">
                <img src="{{association.renditions.viewImage.href}}" ng-if="!hide_images">
                <p><i class="icon-picture" ng-if="hide_images"></i>{{association.description_text}}</p>
            </div>
            <div class="abstract" order="{{editor.abstract.order}}" ng-if="!editor.abstract.hideOnPrint" sd-html-preview="item.abstract"></div>
            <div class="byline" order="{{editor.byline.order}}" ng-if="!editor.byline.hideOnPrint">{{item.byline}}</div>
            <div class="body preview-editor" order="{{editor.dateline.order}}" ng-if="!editor.dateline.hideOnPrint">{{item.dateline.located.city}}</div>
            <div class="body preview-editor" order="{{editor.body_html.order}}" ng-if="!editor.body_html.hideOnPrint" sd-html-preview="item.body_html"></div>
            <div class="body preview-editor" order="{{editor.body_footer.order}}" ng-if="!editor.body_footer.hideOnPrint" sd-html-preview="item.body_footer"></div>
            <div class="body preview-editor" order="{{editor.sign_off.order}}" ng-if="!editor.sign_off.hideOnPrint">{{item.sign_off}}</div>
        </div>
    </div>
</div>
