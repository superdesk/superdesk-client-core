<div class="split-content">
    <div class="header">
        <div class="modal-header">
            <h3 class="pull-left" translate>Content Lists</h3>
        </div>
        <div class="subnav">
            <ul class="filter-type filter-type--padded rightPadding">
                <li class="filter-type__item" ng-class="{'filter-type__item--active': webPublisher.listType === ''}">
                    <a ng-click="webPublisher.changeListFilter('')" translate>all</a>
                </li>
                <li class="filter-type__item" ng-class="{'filter-type__item--active': webPublisher.listType === 'automatic'}">
                    <a ng-click="webPublisher.changeListFilter('automatic')" translate>automatic</a>
                </li>
                <li class="filter-type__item" ng-class="{'filter-type__item--active': webPublisher.listType === 'manual'}">
                    <a ng-click="webPublisher.changeListFilter('manual')" translate>manual</a>
                </li>
            </ul>

            <div class="subnav__stretch-bar"></div>

            <div class="dropdown navbtn strict" ng-if="!state.opened" title="{{ :: 'Create' | translate }}" dropdown>
                <button class="dropdown__toggle sd-create-btn" dropdown__toggle></button>

                <ul class="dropdown__menu dropdown__menu--scrollable pull-right">
                    <li><div class="dropdown__menu-label" translate>Create new item</div></li>
                    <li>
                        <button ng-disabled="webPublisher.listAdd" ng-click="webPublisher.toogleCreateListCard('automatic')">
                            <i class="icon-plus-small icon-round icon-white"></i>{{:: 'Automatic list'| translate}}
                        </button>
                    </li>
                    <!--will be included later
                    <li>
                        <button ng-disabled="webPublisher.listAdd" ng-click="webPublisher.toogleCreateListCard('manual')">
                            <i class="icon-plus-small icon-round icon-white"></i>{{:: 'Manual list'| translate}}
                        </button>
                    </li>-->
                </ul>
            </div>
        </div>
    </div>
    <div class="content headerMargin">
        <div class="flex-grid box wrap-items small-1 medium-2 large-3 xlarge-4">
            <div class="flex-item card-box" ng-repeat="list in lists | filter: {type: webPublisher.listType} | orderBy: 'id' track by list.id"
                ng-class="{'active': list.type === 'manual'}">
                <div class="card-box__header">
                    <div ng-if="!webPublisher._editMode(list, webPublisher.selectedList, webPublisher.listAdd)" class="dropdown" dropdown>
                        <button class="dropdown__toggle" dropdown__toggle>
                            <i class="icon-dots-vertical"></i>
                        </button>
                        <ul class="dropdown__menu more-activity-menu pull-right">
                            <li>
                                <button ng-click="webPublisher.editList(list)" title="{{:: 'Edit list'| translate }}">
                                    <i class="icon-pencil"></i>{{:: 'Edit'| translate}}
                                </button>
                            </li>
                            <li>
                                <button ng-click="webPublisher.editListCardSettings(list)" title="{{:: 'Settings'| translate }}">
                                    <i class="icon-settings"></i>{{:: 'Settings'| translate}}
                                </button>
                            </li>
                            <li>
                                <button ng-click="webPublisher.deleteList(list.id)" title="{{:: 'Remove list'| translate }}">
                                    <i class="icon-trash"></i>{{:: 'Remove'| translate}}
                                </button>
                            </li>
                        </ul>
                    </div>
                    <div ng-if="webPublisher._editMode(list, webPublisher.selectedList, webPublisher.listAdd)" class="dropdown" dropdown>
                        <button ng-click="webPublisher.deleteList(list.id)">
                            <i class="icon-close-small"></i>
                        </button>
                        <button ng-click="webPublisher.saveList()">
                            <i class="icon-ok"></i>
                        </button>
                    </div>
                    <div ng-if="!webPublisher._editMode(list, webPublisher.selectedList, webPublisher.listAdd)"
                        ng-click="webPublisher.editListCard(list)"
                        class="card-box__heading">{{ list.name }}
                    </div>
                    <div ng-if="webPublisher._editMode(list, webPublisher.selectedList, webPublisher.listAdd)" class="card-box__heading">
                        <input type="text" ng-model="newList.name" required>
                    </div>
                </div>

                <!-- todo: ng-show if listOfItems.length -->
                <div class="card-box__content" ng-show="i!=3">
                    <ul class="card-box__content-list card-box__content-list--scrollable">
                        <li ng-repeat="i in [1,2,3,4,5,6,7,8,9]">
                            <h4>Article {{i}}</h4>
                        </li>
                    </ul>
                </div>
                <!-- todo: ng-show if listOfItems.length -->
                <div class="card-box__footer" ng-show="i!=3">
                        <span class="text--lighter text--small text--uppercase">Last Modified:</span>
                        <span class="leftSpace text--small">2 days ago</span>
                        <span class="pull-right state-label state-published">active</span>

                </div>
                <!-- todo: ng-hide if listOfItems.length -->
                <div class="card-box__placeholder card-box__placeholder--cursorPointer" ng-hide="i!=3">
                   Click to add items.
                </div>
            </div>
        </div>
    </div>
</div>

<div sd-modal data-model="webPublisher.settingsModal" class="responsive-popup">
    <div class="modal-header">
        <a href="" class="close" ng-click="webPublisher.cancelListCardSettings()"><i class="icon-close-small"></i></a>
        <h3 translate>Settings</h3>
    </div>
    <div class="modal-body">
        <form name="settingsForm">
            <fieldset>
                <div class="field">
                    <label for="listLimit" translate>number of articles limit</label>
                    <input type="number" id="listLimit" class="line-input" ng-model="newList.limit" min="0">
                </div>
                <div class="field">
                    <label for="listCacheLifeTime" translate>cache lifetime</label>
                    <input type="number" id="listCacheLifeTime" class="line-input" ng-model="newList.cacheLifeTime" min="0" required>   
                </div>
            </fieldset>
        </form>
    </div>
    <div class="modal-footer">
          <button class="btn" ng-click="webPublisher.cancelListCardSettings()" translate>Cancel</button>
          <button class="btn btn--primary" ng-click="webPublisher.saveList()" ng-disabled="!settingsForm.$valid" translate>Save</button>
    </div>
</div>
