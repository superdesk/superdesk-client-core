<div class="subnav paneLayout bg--white">
    <div class="flat-searchbar monitoring-backlink">
        <div class="search-handler">
            <button class="backlink" ng-click="webPublisher.changeTab('navigation')"></button>
        </div>
    </div>
    <h3 class="page-nav-title">{{menu.name}}</h3>
    <div class="subnav__button-stack--square-buttons dropdown open">
        <button class="navbtn sd-create-btn" ng-click="webPublisher.toogleCreateMenu(true)">
            <i class="svg-icon-plus"></i><span class="circle"></span>
        </button>
    </div>
</div>
<div class="paneLayout paneLayout--headerMargin">
    <div class="paneLayout__content">
        <div class="contentPadding">
            <ul class="treeList" dnd-list dnd-drop="webPublisher.reorderMenu(menu, item, index)">
                <li ng-repeat="data in menu.children | orderBy: 'position'" ng-include="webPublisher.TEMPLATES_DIR + '/navigation-tree-renderer.html'"></li>
            </ul>
        </div>
    </div>
    <div class="paneLayout__pane" ng-class="{'paneLayout__pane--open': webPublisher.menuPaneOpen}">
        <div class="modal__header">
            <h3 class="pull-left page-nav-title--text-light" ng-if="webPublisher.isObjEmpty(webPublisher.selectedMenu)" translate>Add Menu Item</h3>
            <h3 class="pull-left page-nav-title--text-light" ng-if="!webPublisher.isObjEmpty(webPublisher.selectedMenu)" translate>Edit Menu Item</h3>
            <div class="pull-right">
                <button class="btn" ng-click="webPublisher.toogleCreateMenu(false)" translate>Cancel</button>
                <button class="btn btn--primary" 
                    ng-disabled="webPublisher.menuForm.$invalid || !webPublisher.menuForm.$dirty" 
                    ng-click="webPublisher.saveMenu(webPublisher._refreshCurrentMenu)" translate>Save</button>
            </div>
        </div>
        <div class="contentPadding">
            <form name="webPublisher.menuForm" class="flat">
                <fieldset class="label-light">
                    <div class="item">
                        <label for="menuName" translate>name</label>
                        <input type="text" class="line-input" id="menuName" ng-model="newMenu.name" required>
                    </div>

                    <div class="item">
                        <label for="menuLabel" translate>label</label>
                        <input type="text" class="line-input" id="menuLabel" ng-model="newMenu.label" required>
                    </div>

                    <div class="item">
                        <label for="menuParent" translate>parent</label>
                        <select id="menuParent" class="dropdown__toggle line-input" ng-model="newMenu.parent"
                            ng-options="parent.id as parent.name for parent in menusInTree | filter: {id: (newMenu.id ? '!' + newMenu.id : '')}" required>
                            <option value=""></option>
                        </select>
                    </div>

                    <div class="item">
                        <label for="menuRoute" translate>route</label>
                        <select id="menuRoute" class="dropdown__toggle line-input" ng-model="newMenu.route"
                            ng-options="route.id as route.name for route in routes">
                            <option value=""></option>
                        </select>
                    </div>

                    <div class="item">
                        <label for="menuUri" translate>uri</label>
                        <input type="text" class="line-input" id="menuUri" ng-model="newMenu.uri">
                    </div>
                </fieldset>
            </form>
        </div>
    </div>
</div>
